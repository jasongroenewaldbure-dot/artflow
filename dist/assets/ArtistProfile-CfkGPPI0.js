import{e as I,u as B,b as T,d as R,r as p,j as s,L as H,a as k,H as M,z as n,s as c}from"./index-Tyz_JBt9.js";import{u as U}from"./useQuery-_wka9r7T.js";import{C as j}from"./Container-D0TcWsx1.js";import{A as v}from"./arrow-left-Bpqrswsz.js";import{c as D}from"./createLucideIcon-DhCu6Z8O.js";import{M as K}from"./map-pin-Cp412RmT.js";import{H as y}from"./heart-BZ8u-Y3T.js";import{S as V}from"./share-2-BUMbV-vM.js";import{E as G}from"./external-link-fg8Hv45E.js";import{E as O}from"./eye-Ctq-Wxgo.js";/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],W=D("badge-check",Q),Z=async o=>{const{data:t,error:u}=await c.from("profiles").select("id, full_name, display_name, bio, location, slug, avatar_url, website, created_at").eq("slug",o).eq("role","ARTIST").single();if(u||!t)throw new Error("Artist not found");const{data:a,error:d}=await c.from("artworks").select(`
      id, 
      title, 
      image_url, 
      primary_image_url,
      slug, 
      price, 
      currency, 
      year,
      medium,
      dimensions,
      status,
      created_at
    `).eq("user_id",t.id).order("created_at",{ascending:!1});if(d)throw new Error("Could not fetch artworks");return c.rpc("log_profile_view",{p_artist_id:t.id}).then(),{profile:t,artworks:a||[]}},os=()=>{const{profileSlug:o}=I(),t=B(),u=T(),{user:a}=R(),[d,f]=p.useState(null),[x,_]=p.useState("All"),[m,w]=p.useState(!1),{data:i,isLoading:A,isError:S}=U({queryKey:["artistPortfolio",o],queryFn:()=>Z(o),enabled:!!o}),C=u.state?.from==="/artists",g=a?.id===i?.profile?.id,F=async()=>{if(!a){n.error("Please sign in to follow artists");return}try{if(m){const{error:e}=await c.from("follows").delete().eq("follower_id",a.id).eq("following_id",i.profile.id);if(e)throw e;w(!1),n.success("Unfollowed artist")}else{const{error:e}=await c.from("follows").insert({follower_id:a.id,following_id:i.profile.id});if(e)throw e;w(!0),n.success("Following artist")}}catch(e){console.error("Error updating follow status:",e),n.error("Failed to update follow status")}},z=()=>{navigator.share?navigator.share({title:`${i?.profile.full_name} - Artist Profile`,text:`Check out ${i?.profile.full_name}'s amazing artwork`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),n.success("Link copied to clipboard"))},q=(e,l="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:l}).format(e),E=e=>e?typeof e=="string"?e:[e.city,e.country].filter(Boolean).join(", "):null,P=e=>{if(!e)return"";const{width:l,height:L,unit:$}=e;return`${l} × ${L} ${$}`};if(A)return s.jsx("div",{className:"artist-profile-page",children:s.jsx(j,{children:s.jsx("div",{style:{textAlign:"center",padding:"4rem 0"},children:s.jsx(H,{size:"lg",text:"Loading artist portfolio..."})})})});if(S||!i)return s.jsx("div",{className:"artist-profile-page",children:s.jsx(j,{children:s.jsxs("div",{style:{textAlign:"center",padding:"4rem 0"},children:[s.jsx("h1",{children:"404 - Artist Not Found"}),s.jsx("p",{children:"The artist you are looking for does not exist or has moved."}),s.jsxs("div",{style:{marginTop:"2rem"},children:[s.jsxs("button",{onClick:()=>t(-1),className:"btn btn-outline",style:{marginRight:"1rem"},children:[s.jsx(v,{size:16,style:{marginRight:"0.5rem"}}),"Go Back"]}),s.jsx(k,{to:"/artists",className:"btn btn-primary",children:"Browse Artists"})]})]})})});const{profile:r,artworks:h}=i,b=E(r.location),N=h.filter(e=>x==="All"?!0:e.status===x);return s.jsxs(s.Fragment,{children:[s.jsxs(M,{children:[s.jsxs("title",{children:[r.full_name," - Artist Profile | ArtFlow"]}),s.jsx("meta",{name:"description",content:r.bio||`View ${r.full_name}'s artwork portfolio on ArtFlow`}),s.jsx("meta",{property:"og:title",content:`${r.full_name} - Artist Profile`}),s.jsx("meta",{property:"og:description",content:r.bio||`View ${r.full_name}'s artwork portfolio`}),s.jsx("meta",{property:"og:image",content:r.avatar_url})]}),s.jsx("div",{className:"artist-profile-page",children:s.jsxs(j,{children:[C&&s.jsxs("button",{onClick:()=>t("/artists"),className:"back-btn",children:[s.jsx(v,{size:16}),"All Artists"]}),s.jsxs("header",{className:"artist-header",children:[s.jsx("div",{className:"artist-avatar-section",children:s.jsx("img",{src:r.avatar_url||"https://placehold.co/128x128",alt:r.full_name,className:"artist-avatar-large"})}),s.jsxs("div",{className:"artist-info-section",children:[s.jsxs("div",{className:"artist-title",children:[s.jsx("h1",{className:"artist-name",children:r.full_name}),r.display_name&&r.display_name!==r.full_name&&s.jsxs("p",{className:"artist-display-name",children:['"',r.display_name,'"']}),s.jsx(W,{className:"verified-badge",size:20})]}),b&&s.jsxs("div",{className:"artist-location",children:[s.jsx(K,{size:16}),s.jsx("span",{children:b})]}),r.bio&&s.jsx("p",{className:"artist-bio",children:r.bio}),s.jsxs("div",{className:"artist-stats",children:[s.jsxs("div",{className:"stat",children:[s.jsx("strong",{children:h.length}),s.jsx("span",{children:"Artworks"})]}),s.jsxs("div",{className:"stat",children:[s.jsx("strong",{children:"2.5K"}),s.jsx("span",{children:"Followers"})]}),s.jsxs("div",{className:"stat",children:[s.jsx("strong",{children:"156"}),s.jsx("span",{children:"Following"})]})]}),s.jsxs("div",{className:"artist-actions",children:[!g&&s.jsxs("button",{onClick:F,className:`btn ${m?"btn-outline":"btn-primary"}`,children:[s.jsx(y,{size:16,fill:m?"currentColor":"none"}),m?"Following":"Follow"]}),s.jsxs("button",{onClick:z,className:"btn btn-outline",children:[s.jsx(V,{size:16}),"Share"]}),r.website&&s.jsxs("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",children:[s.jsx(G,{size:16}),"Website"]})]})]})]}),s.jsx("div",{className:"artwork-filters",children:s.jsx("div",{className:"filter-buttons",children:["All","Available","Sold"].map(e=>s.jsxs("button",{className:`filter-btn ${x===e?"active":""}`,onClick:()=>_(e),children:[e,s.jsxs("span",{className:"filter-count",children:["(",e==="All"?h.length:h.filter(l=>l.status===e).length,")"]})]},e))})}),s.jsx("div",{className:"artworks-section",children:N.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("h3",{children:"No artworks match this filter"}),s.jsx("p",{children:"Try selecting a different filter or check back later for new works."})]}):s.jsx("div",{className:"artworks-grid",children:N.map(e=>s.jsxs("div",{className:"artwork-card",children:[s.jsxs(k,{to:`/artwork/${e.slug}`,className:"artwork-link",children:[s.jsxs("div",{className:"artwork-image",children:[s.jsx("img",{src:e.primary_image_url||e.image_url||"https://placehold.co/400x400",alt:e.title,loading:"lazy"}),e.status==="Sold"&&s.jsx("div",{className:"sold-badge",children:"Sold"}),s.jsx("div",{className:"artwork-overlay",children:s.jsxs("div",{className:"artwork-actions",children:[s.jsx("button",{className:"action-btn",children:s.jsx(y,{size:16})}),s.jsx("button",{className:"action-btn",children:s.jsx(O,{size:16})})]})})]}),s.jsxs("div",{className:"artwork-info",children:[s.jsx("h3",{className:"artwork-title",children:e.title}),s.jsxs("p",{className:"artwork-details",children:[e.medium," • ",e.year]}),e.dimensions&&s.jsx("p",{className:"artwork-dimensions",children:P(e.dimensions)}),s.jsx("p",{className:"artwork-price",children:e.price>0?q(e.price,e.currency):"Price on Request"})]})]}),!g&&e.status==="Available"&&s.jsx("div",{className:"artwork-card-actions",children:s.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>f(e),children:"Inquire"})})]},e.id))})})]})}),d&&s.jsx("div",{className:"modal-overlay",onClick:()=>f(null),children:s.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[s.jsxs("h3",{children:["Inquire about ",d.title]}),s.jsx("p",{children:"Inquiry form would go here..."}),s.jsxs("div",{className:"modal-actions",children:[s.jsx("button",{onClick:()=>f(null),className:"btn btn-outline",children:"Cancel"}),s.jsx("button",{className:"btn btn-primary",children:"Send Inquiry"})]})]})})]})};export{os as default};
