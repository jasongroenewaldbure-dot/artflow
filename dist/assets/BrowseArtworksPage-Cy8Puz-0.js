import{r as m,j as e,c as E,d as I,s as M,L as Q,H as W,a as $}from"./index-Tyz_JBt9.js";import{I as j}from"./Icon-DdnnFTJv.js";import{s as V}from"./errorHandling-CFCT0cl6.js";import{C as F}from"./Container-D0TcWsx1.js";import{E as Z}from"./ErrorMessage-D_zXdPzX.js";import"./logger-CnymG8OQ.js";const J=({isOpen:y,onClose:b,filters:N,onFiltersChange:n,onApply:S,onClear:C})=>{const[t,v]=m.useState(N);m.useEffect(()=>{v(N)},[N]);const c=(a,f)=>{const g={...t,[a]:f};v(g),n(g)},x=()=>{S(),b()},A=()=>{C(),b()};return y?e.jsx("div",{className:"filter-sidesheet-overlay",onClick:b,children:e.jsxs("div",{className:"filter-sidesheet",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"filter-sidesheet-header",children:[e.jsx("h2",{children:"All Filters"}),e.jsx("button",{className:"filter-sidesheet-close",onClick:b,children:e.jsx(j,{name:"x",size:20})})]}),e.jsxs("div",{className:"filter-sidesheet-content",children:[e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{children:"Price Range"}),e.jsxs("div",{className:"filter-options",children:[e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"priceType",value:"fixed",checked:t.priceType==="fixed",onChange:a=>c("priceType",a.target.value)}),e.jsx("span",{children:"Fixed Price"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"priceType",value:"negotiable",checked:t.priceType==="negotiable",onChange:a=>c("priceType",a.target.value)}),e.jsx("span",{children:"Price Negotiable"})]})]}),t.priceType==="fixed"&&e.jsxs("div",{className:"price-range-inputs",children:[e.jsxs("div",{className:"price-input-group",children:[e.jsx("label",{children:"Min Price (R)"}),e.jsx("input",{type:"number",value:t.minPrice||"",onChange:a=>c("minPrice",a.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"price-input-group",children:[e.jsx("label",{children:"Max Price (R)"}),e.jsx("input",{type:"number",value:t.maxPrice||"",onChange:a=>c("maxPrice",a.target.value),placeholder:"No limit"})]})]})]}),e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{children:"Year"}),e.jsxs("div",{className:"filter-options",children:[e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"yearType",value:"range",checked:t.yearType==="range",onChange:a=>c("yearType",a.target.value)}),e.jsx("span",{children:"Year Range"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"yearType",value:"specific",checked:t.yearType==="specific",onChange:a=>c("yearType",a.target.value)}),e.jsx("span",{children:"Specific Year"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"yearType",value:"decade",checked:t.yearType==="decade",onChange:a=>c("yearType",a.target.value)}),e.jsx("span",{children:"Decade"})]})]}),t.yearType==="range"&&e.jsxs("div",{className:"year-range-inputs",children:[e.jsxs("div",{className:"year-input-group",children:[e.jsx("label",{children:"From Year"}),e.jsx("input",{type:"number",value:t.yearFrom||"",onChange:a=>c("yearFrom",a.target.value),placeholder:"1900",min:"1900",max:new Date().getFullYear()})]}),e.jsxs("div",{className:"year-input-group",children:[e.jsx("label",{children:"To Year"}),e.jsx("input",{type:"number",value:t.yearTo||"",onChange:a=>c("yearTo",a.target.value),placeholder:new Date().getFullYear().toString(),min:"1900",max:new Date().getFullYear()})]})]}),t.yearType==="specific"&&e.jsxs("div",{className:"year-input-group",children:[e.jsx("label",{children:"Year"}),e.jsx("input",{type:"number",value:t.specificYear||"",onChange:a=>c("specificYear",a.target.value),placeholder:"2020",min:"1900",max:new Date().getFullYear()})]}),t.yearType==="decade"&&e.jsx("div",{className:"decade-options",children:["1920s","1930s","1940s","1950s","1960s","1970s","1980s","1990s","2000s","2010s","2020s"].map(a=>e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"decade",value:a,checked:t.decade===a,onChange:f=>c("decade",f.target.value)}),e.jsx("span",{children:a})]},a))})]}),e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{children:"Orientation"}),e.jsxs("div",{className:"filter-options",children:[e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"orientation",value:"portrait",checked:t.orientation==="portrait",onChange:a=>c("orientation",a.target.value)}),e.jsx("span",{children:"Portrait"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"orientation",value:"landscape",checked:t.orientation==="landscape",onChange:a=>c("orientation",a.target.value)}),e.jsx("span",{children:"Landscape"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"orientation",value:"square",checked:t.orientation==="square",onChange:a=>c("orientation",a.target.value)}),e.jsx("span",{children:"Square"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"orientation",value:"all",checked:t.orientation==="all",onChange:a=>c("orientation",a.target.value)}),e.jsx("span",{children:"All Orientations"})]})]})]}),e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{children:"Location"}),e.jsxs("div",{className:"location-filters",children:[e.jsxs("div",{className:"location-input-group",children:[e.jsx("label",{children:"Artist Location"}),e.jsx("input",{type:"text",value:t.artistLocation||"",onChange:a=>c("artistLocation",a.target.value),placeholder:"e.g., Cape Town, South Africa"})]}),e.jsxs("div",{className:"location-input-group",children:[e.jsx("label",{children:"Artwork Location"}),e.jsx("input",{type:"text",value:t.artworkLocation||"",onChange:a=>c("artworkLocation",a.target.value),placeholder:"e.g., Johannesburg, South Africa"})]})]})]}),e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{children:"Framing"}),e.jsxs("div",{className:"filter-options",children:[e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"framing",value:"framed",checked:t.framing==="framed",onChange:a=>c("framing",a.target.value)}),e.jsx("span",{children:"Framed"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"framing",value:"unframed",checked:t.framing==="unframed",onChange:a=>c("framing",a.target.value)}),e.jsx("span",{children:"Unframed"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"framing",value:"custom",checked:t.framing==="custom",onChange:a=>c("framing",a.target.value)}),e.jsx("span",{children:"Has option for custom framing"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"framing",value:"all",checked:t.framing==="all",onChange:a=>c("framing",a.target.value)}),e.jsx("span",{children:"All"})]})]})]}),e.jsxs("div",{className:"filter-section",children:[e.jsx("h3",{children:"Certificate of Authenticity"}),e.jsxs("div",{className:"filter-options",children:[e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"coa",value:"with-coa",checked:t.coa==="with-coa",onChange:a=>c("coa",a.target.value)}),e.jsx("span",{children:"Comes with COA"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"coa",value:"without-coa",checked:t.coa==="without-coa",onChange:a=>c("coa",a.target.value)}),e.jsx("span",{children:"No COA"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"coa",value:"all",checked:t.coa==="all",onChange:a=>c("coa",a.target.value)}),e.jsx("span",{children:"All"})]})]}),t.coa==="with-coa"&&e.jsxs("div",{className:"coa-type-options",children:[e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"coaType",value:"digital",checked:t.coaType==="digital",onChange:a=>c("coaType",a.target.value)}),e.jsx("span",{children:"Digital COA"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"coaType",value:"physical",checked:t.coaType==="physical",onChange:a=>c("coaType",a.target.value)}),e.jsx("span",{children:"Physical COA"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"coaType",value:"both",checked:t.coaType==="both",onChange:a=>c("coaType",a.target.value)}),e.jsx("span",{children:"Both"})]})]})]})]}),e.jsxs("div",{className:"filter-sidesheet-footer",children:[e.jsx("button",{className:"filter-clear-btn",onClick:A,children:"Clear All"}),e.jsx("button",{className:"filter-apply-btn",onClick:x,children:"Apply Filters"})]})]})}):null},X=({onFiltersChange:y,totalCount:b,filteredCount:N})=>{const[n,S]=E(),[C,t]=m.useState(!1),[v,c]=m.useState(null),[x,A]=m.useState(!1),[a,f]=m.useState({priceRange:n.get("price_range")||"all",medium:n.get("medium")||"all",genre:n.get("genre")||"all",size:n.get("size")||"all",priceType:n.get("price_type")||"all",minPrice:n.get("min_price")||"",maxPrice:n.get("max_price")||"",yearType:n.get("year_type")||"all",yearFrom:n.get("year_from")||"",yearTo:n.get("year_to")||"",specificYear:n.get("specific_year")||"",decade:n.get("decade")||"all",orientation:n.get("orientation")||"all",artistLocation:n.get("artist_location")||"",artworkLocation:n.get("artwork_location")||"",framing:n.get("framing")||"all",coa:n.get("coa")||"all",coaType:n.get("coa_type")||"all",rarity:n.get("rarity")||"all",framingStatus:n.get("framing")||"all",signatureStatus:n.get("signature")||"all",dominantColors:n.get("colors")?n.get("colors").split(","):[],subject:n.get("subject")||"all",condition:n.get("condition")||"all",year:n.get("year")||"all",location:n.get("location")||"all",hasCoA:n.get("has_coa")?n.get("has_coa")==="true":null,sortBy:n.get("sort")||"newest"}),g=m.useMemo(()=>({priceRange:[{value:"all",label:"All Prices"},{value:"under-1000",label:"Under R1,000"},{value:"1000-5000",label:"R1,000 - R5,000"},{value:"5000-10000",label:"R5,000 - R10,000"},{value:"10000-25000",label:"R10,000 - R25,000"},{value:"25000-50000",label:"R25,000 - R50,000"},{value:"over-50000",label:"Over R50,000"}],medium:[{value:"all",label:"All Mediums"},{value:"oil-painting",label:"Oil Painting"},{value:"acrylic",label:"Acrylic"},{value:"watercolor",label:"Watercolor"},{value:"mixed-media",label:"Mixed Media"},{value:"photography",label:"Photography"},{value:"sculpture",label:"Sculpture"},{value:"digital",label:"Digital Art"},{value:"drawing",label:"Drawing"},{value:"print",label:"Print"}],genre:[{value:"all",label:"All Genres"},{value:"abstract",label:"Abstract"},{value:"portrait",label:"Portrait"},{value:"landscape",label:"Landscape"},{value:"still-life",label:"Still Life"},{value:"figurative",label:"Figurative"},{value:"contemporary",label:"Contemporary"},{value:"modern",label:"Modern"},{value:"classical",label:"Classical"},{value:"minimalist",label:"Minimalist"}],size:[{value:"all",label:"All Sizes"},{value:"small",label:"Small (under 30cm)"},{value:"medium",label:"Medium (30-60cm)"},{value:"large",label:"Large (60-120cm)"},{value:"extra-large",label:"Extra Large (over 120cm)"}],rarity:[{value:"all",label:"All Rarities"},{value:"unique",label:"Unique"},{value:"limited-edition",label:"Limited Edition"},{value:"open-edition",label:"Open Edition"},{value:"vintage",label:"Vintage"}],framingStatus:[{value:"all",label:"All Framing"},{value:"framed",label:"Framed"},{value:"unframed",label:"Unframed"},{value:"custom-frame",label:"Custom Frame"}],signatureStatus:[{value:"all",label:"All Signatures"},{value:"signed",label:"Signed"},{value:"unsigned",label:"Unsigned"},{value:"stamped",label:"Stamped"}],dominantColors:[{value:"red",label:"Red",color:"#ef4444"},{value:"blue",label:"Blue",color:"#3b82f6"},{value:"green",label:"Green",color:"#10b981"},{value:"yellow",label:"Yellow",color:"#f59e0b"},{value:"purple",label:"Purple",color:"#8b5cf6"},{value:"orange",label:"Orange",color:"#f97316"},{value:"pink",label:"Pink",color:"#ec4899"},{value:"black",label:"Black",color:"#1f2937"},{value:"white",label:"White",color:"#f9fafb"},{value:"brown",label:"Brown",color:"#92400e"}],subject:[{value:"all",label:"All Subjects"},{value:"people",label:"People"},{value:"nature",label:"Nature"},{value:"architecture",label:"Architecture"},{value:"animals",label:"Animals"},{value:"abstract-concepts",label:"Abstract Concepts"},{value:"urban",label:"Urban"},{value:"religious",label:"Religious"},{value:"mythological",label:"Mythological"}],condition:[{value:"all",label:"All Conditions"},{value:"excellent",label:"Excellent"},{value:"very-good",label:"Very Good"},{value:"good",label:"Good"},{value:"fair",label:"Fair"},{value:"poor",label:"Poor"}],year:[{value:"all",label:"All Years"},{value:"2024",label:"2024"},{value:"2023",label:"2023"},{value:"2022",label:"2022"},{value:"2021",label:"2021"},{value:"2020",label:"2020"},{value:"2010s",label:"2010s"},{value:"2000s",label:"2000s"},{value:"1990s",label:"1990s"},{value:"1980s",label:"1980s"},{value:"1970s",label:"1970s"},{value:"1960s",label:"1960s"},{value:"1950s",label:"1950s"},{value:"1940s",label:"1940s"},{value:"1930s",label:"1930s"},{value:"1920s",label:"1920s"},{value:"1910s",label:"1910s"},{value:"1900s",label:"1900s"},{value:"pre-1900",label:"Pre-1900"}],location:[{value:"all",label:"All Locations"},{value:"cape-town",label:"Cape Town"},{value:"johannesburg",label:"Johannesburg"},{value:"durban",label:"Durban"},{value:"pretoria",label:"Pretoria"},{value:"port-elizabeth",label:"Port Elizabeth"},{value:"bloemfontein",label:"Bloemfontein"},{value:"international",label:"International"}],sortBy:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"price-low",label:"Price: Low to High"},{value:"price-high",label:"Price: High to Low"},{value:"title-az",label:"Title: A-Z"},{value:"title-za",label:"Title: Z-A"},{value:"popular",label:"Most Popular"},{value:"trending",label:"Trending"}]}),[]);m.useEffect(()=>{const s=new URLSearchParams;Object.entries(a).forEach(([p,u])=>{u&&u!=="all"&&u!==null&&(Array.isArray(u)?u.length>0&&s.set(p,u.join(",")):typeof u=="boolean"?s.set(p,u.toString()):s.set(p,u))}),S(s,{replace:!0})},[a,S]);const _=m.useRef();m.useEffect(()=>(_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{y(a)},100),()=>{_.current&&clearTimeout(_.current)}),[a,y]);const i=(s,p)=>{f(u=>({...u,[s]:p})),c(null)},z=s=>{f(p=>({...p,dominantColors:p.dominantColors.includes(s)?p.dominantColors.filter(u=>u!==s):[...p.dominantColors,s]}))},o=()=>{f({priceRange:"all",medium:"all",genre:"all",size:"all",rarity:"all",framingStatus:"all",signatureStatus:"all",dominantColors:[],subject:"all",condition:"all",year:"all",location:"all",hasCoA:null,sortBy:"newest"})},P=(()=>{let s=0;return Object.entries(a).forEach(([p,u])=>{p==="dominantColors"?Array.isArray(u)&&u.length>0&&s++:u&&u!=="all"&&u!==null&&s++}),s})(),k=(s,p)=>e.jsx("div",{className:"filter-dropdown",children:p.map(u=>e.jsxs("button",{className:`filter-dropdown-item ${a[s]===u.value?"active":""}`,onClick:()=>i(s,u.value),children:[u.label,u.count&&e.jsxs("span",{className:"count",children:["(",u.count,")"]})]},u.value))});return e.jsxs("div",{className:"horizontal-filter-system",children:[e.jsxs("div",{className:"mobile-filter-row",children:[e.jsxs("button",{className:"mobile-filter-sort-btn",onClick:()=>A(!x),children:[e.jsx(j,{name:"sliders-horizontal",size:16}),"Sort & Filter"]}),e.jsxs("div",{className:"mobile-artwork-count",children:[N.toLocaleString()," of ",b.toLocaleString()," artworks"]})]}),e.jsxs("div",{className:"filter-bar",children:[e.jsxs("div",{className:"filter-controls",children:[e.jsxs("button",{className:`filter-btn all-filters ${C?"active":""}`,onClick:()=>t(!C),children:[e.jsx(j,{name:"sliders-horizontal",size:16}),"All Filters",P>0&&e.jsx("span",{className:"filter-count",children:P})]}),e.jsxs("div",{className:"quick-filters",children:[e.jsxs("div",{className:"filter-dropdown-container",children:[e.jsxs("button",{className:`filter-btn ${a.priceRange!=="all"?"active":""}`,onClick:()=>c(v==="priceRange"?null:"priceRange"),children:["Price Range",e.jsx(j,{name:"chevron-down",size:14})]}),v==="priceRange"&&k("priceRange",g.priceRange)]}),e.jsxs("div",{className:"filter-dropdown-container",children:[e.jsxs("button",{className:`filter-btn ${a.medium!=="all"?"active":""}`,onClick:()=>c(v==="medium"?null:"medium"),children:["Medium",e.jsx(j,{name:"chevron-down",size:14})]}),v==="medium"&&k("medium",g.medium)]}),e.jsxs("div",{className:"filter-dropdown-container",children:[e.jsxs("button",{className:`filter-btn ${a.genre!=="all"?"active":""}`,onClick:()=>c(v==="genre"?null:"genre"),children:["Genre",e.jsx(j,{name:"chevron-down",size:14})]}),v==="genre"&&k("genre",g.genre)]}),e.jsxs("div",{className:"filter-dropdown-container",children:[e.jsxs("button",{className:`filter-btn ${a.size!=="all"?"active":""}`,onClick:()=>c(v==="size"?null:"size"),children:["Size",e.jsx(j,{name:"chevron-down",size:14})]}),v==="size"&&k("size",g.size)]})]}),e.jsxs("div",{className:"sort-control",children:[e.jsx("span",{className:"sort-label",children:"Sort:"}),e.jsx("select",{value:a.sortBy,onChange:s=>i("sortBy",s.target.value),className:"sort-select",children:g.sortBy.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"results-count",children:[N.toLocaleString()," of ",b.toLocaleString()," artworks"]})]}),C&&e.jsxs("div",{className:"all-filters-panel",children:[e.jsxs("div",{className:"filters-header",children:[e.jsx("h3",{children:"All Filters"}),e.jsxs("button",{onClick:o,className:"clear-all-btn",children:[e.jsx(j,{name:"x",size:16}),"Clear All"]})]}),e.jsxs("div",{className:"filters-grid",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Rarity"}),e.jsx("select",{value:a.rarity,onChange:s=>i("rarity",s.target.value),children:g.rarity.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Framing"}),e.jsx("select",{value:a.framingStatus,onChange:s=>i("framingStatus",s.target.value),children:g.framingStatus.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Signature"}),e.jsx("select",{value:a.signatureStatus,onChange:s=>i("signatureStatus",s.target.value),children:g.signatureStatus.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Dominant Colors"}),e.jsx("div",{className:"color-picker",children:g.dominantColors.map(s=>e.jsx("button",{className:`color-chip ${a.dominantColors.includes(s.value)?"active":""}`,onClick:()=>z(s.value),style:{backgroundColor:s.color},title:s.label},s.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Subject"}),e.jsx("select",{value:a.subject,onChange:s=>i("subject",s.target.value),children:g.subject.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Condition"}),e.jsx("select",{value:a.condition,onChange:s=>i("condition",s.target.value),children:g.condition.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Year"}),e.jsx("select",{value:a.year,onChange:s=>i("year",s.target.value),children:g.year.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Location"}),e.jsx("select",{value:a.location,onChange:s=>i("location",s.target.value),children:g.location.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Certificate of Authenticity"}),e.jsx("div",{className:"checkbox-group",children:e.jsxs("label",{className:"checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:a.hasCoA===!0,onChange:s=>i("hasCoA",s.target.checked?!0:null)}),e.jsx("span",{children:"Has CoA"})]})})]})]})]}),e.jsx(J,{isOpen:C,onClose:()=>t(!1),filters:a,onFiltersChange:f,onApply:()=>{y(a),t(!1)},onClear:o})]})},te=()=>{const{user:y}=I(),[b,N]=m.useState([]),[n,S]=m.useState([]),[C,t]=m.useState(!0),[v,c]=m.useState(null),[x,A]=m.useState(""),[a,f]=m.useState("grid"),[g,_]=m.useState(!1),[i,z]=E(),[o,w]=m.useState({searchQuery:i.get("search")||"",naturalLanguageQuery:"",priceRange:i.get("price_range")||"all",priceType:i.get("price_type")||"all",minPrice:i.get("min_price")?parseFloat(i.get("min_price")):null,maxPrice:i.get("max_price")?parseFloat(i.get("max_price")):null,useLearnedBudget:i.get("use_learned_budget")==="true",genre:i.get("genre")||"all",medium:i.get("medium")||"all",rarity:i.get("rarity")||"all",condition:i.get("condition")||"all",orientation:i.get("orientation")||"all",subject:i.get("subject")||"all",dominantColors:i.get("colors")?i.get("colors").split(","):[],colorGroups:i.get("color_groups")?i.get("color_groups").split(","):[],size:i.get("size")||"all",sizeType:i.get("size_type")||"predefined",minWidth:i.get("min_width")?parseFloat(i.get("min_width")):null,maxWidth:i.get("max_width")?parseFloat(i.get("max_width")):null,minHeight:i.get("min_height")?parseFloat(i.get("min_height")):null,maxHeight:i.get("max_height")?parseFloat(i.get("max_height")):null,location:i.get("location")||"all",framingStatus:i.get("framing")||"all",signatureStatus:i.get("signature")||"all",hasCoA:i.get("has_coa")?i.get("has_coa")==="true":null,year:i.get("year")?parseInt(i.get("year")):null,yearRange:i.get("year_range")||"all",sortBy:i.get("sort")||"newest",sortDirection:i.get("sort_direction")||"desc",usePersonalizedFilters:i.get("personalized")==="true",learnedPreferences:i.get("learned")==="true"}),[P,k]=m.useState([]),[s,p]=m.useState([]),[u,D]=m.useState([]);m.useEffect(()=>{O()},[]),m.useEffect(()=>{Y()},[b,x,o]),m.useEffect(()=>{const l=new URLSearchParams;o.priceRange!=="all"&&l.set("price_range",o.priceRange),o.genre!=="all"&&l.set("genre",o.genre),o.medium!=="all"&&l.set("medium",o.medium),o.size!=="all"&&l.set("size",o.size),o.sortBy!=="newest"&&l.set("sort",o.sortBy),x&&l.set("q",x),z(l,{replace:!0})},[o,x,z]);const O=async()=>{try{t(!0),c(null);const{data:l,error:r}=await M.from("artworks").select(`
          id, title, price, currency, primary_image_url, genre, medium, dimensions, created_at, user_id
        `).eq("status","available").not("primary_image_url","is",null).order("created_at",{ascending:!1});if(r)throw r;const d=[...new Set((l||[]).map(h=>h.user_id))],{data:T}=await M.from("profiles").select("id, full_name, slug").in("id",d),H=new Map(T?.map(h=>[h.id,h])||[]),L=(l||[]).map(h=>{const R=H.get(h.user_id);return{id:h.id,title:h.title,price:h.price,currency:h.currency,primary_image_url:h.primary_image_url,genre:h.genre,medium:h.medium,dimensions:h.dimensions,created_at:h.created_at,rarity:null,dominant_colors:null,color_groups:null,location:null,subject:null,orientation:null,framing_status:null,signature_info:null,is_price_negotiable:null,min_price:null,max_price:null,year:null,condition:null,has_certificate_of_authenticity:null,view_count:null,like_count:null,inquiry_count:null,artist:{id:R?.id||h.user_id,slug:R?.slug||"",name:R?.full_name||"Unknown Artist"}}});N(L);const q=[...new Set(L.map(h=>h.genre).filter(Boolean))].sort(),G=[...new Set(L.map(h=>h.medium).filter(Boolean))].sort();k(q),p(G);const K=L.map(h=>h.price).filter(Boolean);D([{label:"Under $1,000",min:0,max:1e3},{label:"$1,000 - $5,000",min:1e3,max:5e3},{label:"$5,000 - $10,000",min:5e3,max:1e4},{label:"$10,000 - $25,000",min:1e4,max:25e3},{label:"$25,000 - $50,000",min:25e3,max:5e4},{label:"Over $50,000",min:5e4,max:1/0}])}catch(l){console.error("Error loading artworks:",l),c(l.message||"Failed to load artworks."),V(l,{component:"ArtworksPage",action:"loadArtworks"})}finally{t(!1)}},Y=()=>{let l=[...b];if(x.trim()){const r=x.toLowerCase();l=l.filter(d=>d.title?.toLowerCase().includes(r)||d.artist.name.toLowerCase().includes(r)||d.genre?.toLowerCase().includes(r)||d.medium?.toLowerCase().includes(r))}if(o.priceRange!=="all"){const r=u.find(d=>d.label===o.priceRange);r&&(l=l.filter(d=>d.price?d.price>=r.min&&d.price<r.max:!1))}switch(o.genre!=="all"&&(l=l.filter(r=>r.genre===o.genre)),o.medium!=="all"&&(l=l.filter(r=>r.medium===o.medium)),o.size!=="all"&&(l=l.filter(r=>U(r.dimensions)===o.size)),o.sortBy){case"newest":l.sort((r,d)=>new Date(d.created_at).getTime()-new Date(r.created_at).getTime());break;case"oldest":l.sort((r,d)=>new Date(r.created_at).getTime()-new Date(d.created_at).getTime());break;case"price_low":l.sort((r,d)=>(r.price||0)-(d.price||0));break;case"price_high":l.sort((r,d)=>(d.price||0)-(r.price||0));break;case"title":l.sort((r,d)=>(r.title||"").localeCompare(d.title||""));break}S(l)},U=l=>{if(!l||typeof l!="object")return"Unknown";const{width:r,height:d}=l;if(!r||!d)return"Unknown";const T=r*d;return T<100?"Small":T<1e3?"Medium":T<5e3?"Large":"Extra Large"},B=()=>{w({searchQuery:"",naturalLanguageQuery:"",priceRange:"all",priceType:"all",minPrice:null,maxPrice:null,useLearnedBudget:!1,genre:"all",medium:"all",rarity:"all",condition:"all",orientation:"all",subject:"all",dominantColors:[],colorGroups:[],size:"all",sizeType:"predefined",minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,location:"all",framingStatus:"all",signatureStatus:"all",hasCoA:null,year:null,yearRange:"all",sortBy:"newest",sortDirection:"desc",usePersonalizedFilters:!1,learnedPreferences:!1}),A("")};return Object.values(o).filter(l=>l!=="all").length+(x?1:0),C?e.jsx("div",{className:"artworks-page",children:e.jsx(F,{children:e.jsxs("div",{className:"artworks-loading",children:[e.jsx(Q,{}),e.jsx("p",{children:"Loading artworks..."})]})})}):v?e.jsx("div",{className:"artworks-page",children:e.jsx(F,{children:e.jsx(Z,{message:v})})}):e.jsxs("div",{className:"artworks-page",children:[e.jsxs(W,{children:[e.jsx("title",{children:"Browse Artworks - ArtFlow"}),e.jsx("meta",{name:"description",content:"Discover and browse artworks from talented artists. Filter by price, genre, medium, and more."})]}),e.jsxs(F,{children:[e.jsxs("div",{className:"artworks-header",children:[e.jsx("div",{className:"artworks-title",children:e.jsx("h1",{children:"Browse Artworks"})}),e.jsxs("div",{className:"artworks-controls",children:[e.jsxs("div",{className:"search-container",children:[e.jsx(j,{name:"search",size:20}),e.jsx("input",{type:"text",placeholder:"Search artworks, artists, genres...",value:x,onChange:l=>A(l.target.value),className:"search-input"})]}),y&&y.role==="ARTIST"&&e.jsxs("div",{className:"view-controls",children:[e.jsx("button",{className:`view-btn ${a==="grid"?"active":""}`,onClick:()=>f("grid"),children:e.jsx(j,{name:"grid",size:20})}),e.jsx("button",{className:`view-btn ${a==="list"?"active":""}`,onClick:()=>f("list"),children:e.jsx(j,{name:"list",size:20})})]})]})]}),e.jsx(X,{onFiltersChange:l=>{w(r=>({...r,priceRange:l.priceRange,medium:l.medium,genre:l.genre,size:l.size,rarity:l.rarity,framingStatus:l.framingStatus,signatureStatus:l.signatureStatus,dominantColors:l.dominantColors,subject:l.subject,condition:l.condition,year:l.year,location:l.location,hasCoA:l.hasCoA,sortBy:l.sortBy}))},totalCount:b.length,filteredCount:n.length}),g&&e.jsxs("div",{className:"artworks-filters",children:[e.jsxs("div",{className:"filters-header",children:[e.jsx("h3",{children:"Filters"}),e.jsxs("button",{onClick:B,className:"clear-filters",children:[e.jsx(j,{name:"x",size:16}),"Clear All"]})]}),e.jsxs("div",{className:"filters-grid",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Price Range"}),e.jsxs("select",{value:o.priceRange,onChange:l=>w(r=>({...r,priceRange:l.target.value})),children:[e.jsx("option",{value:"all",children:"All Prices"}),u.map((l,r)=>e.jsx("option",{value:l.label,children:l.label},r))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Genre"}),e.jsxs("select",{value:o.genre,onChange:l=>w(r=>({...r,genre:l.target.value})),children:[e.jsx("option",{value:"all",children:"All Genres"}),P.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Medium"}),e.jsxs("select",{value:o.medium,onChange:l=>w(r=>({...r,medium:l.target.value})),children:[e.jsx("option",{value:"all",children:"All Mediums"}),s.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Size"}),e.jsxs("select",{value:o.size,onChange:l=>w(r=>({...r,size:l.target.value})),children:[e.jsx("option",{value:"all",children:"All Sizes"}),e.jsx("option",{value:"Small",children:"Small"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Large",children:"Large"}),e.jsx("option",{value:"Extra Large",children:"Extra Large"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("label",{children:"Sort By"}),e.jsxs("select",{value:o.sortBy,onChange:l=>w(r=>({...r,sortBy:l.target.value})),children:[e.jsx("option",{value:"newest",children:"Newest First"}),e.jsx("option",{value:"oldest",children:"Oldest First"}),e.jsx("option",{value:"price_low",children:"Price: Low to High"}),e.jsx("option",{value:"price_high",children:"Price: High to Low"}),e.jsx("option",{value:"title",children:"Title A-Z"})]})]})]})]}),n.length===0?e.jsxs("div",{className:"no-artworks",children:[e.jsx("h3",{children:"No artworks found"}),e.jsx("p",{children:"Try adjusting your filters or search terms."}),e.jsx("button",{onClick:B,className:"btn btn-primary",children:"Clear Filters"})]}):e.jsx("div",{className:`artworks-${a}`,children:n.map(l=>e.jsxs($,{to:`/artwork/${l.id}`,className:"artwork-card",children:[e.jsx("div",{className:"artwork-image",children:e.jsx("img",{src:l.primary_image_url||"/api/placeholder/300/300",alt:l.title||"Untitled"})}),e.jsxs("div",{className:"artwork-info",children:[e.jsx("h3",{className:"artwork-title",children:l.title||"Untitled"}),e.jsx("p",{className:"artwork-artist",children:e.jsx($,{to:`/artist/${l.artist.slug}`,children:l.artist.name})}),e.jsxs("div",{className:"artwork-meta",children:[l.genre&&e.jsx("span",{className:"artwork-genre",children:l.genre}),l.medium&&e.jsx("span",{className:"artwork-medium",children:l.medium})]}),e.jsx("p",{className:"artwork-price",children:l.price?`${l.currency} ${l.price.toLocaleString()}`:"Price on request"})]})]},l.id))})]})]})};export{te as default};
