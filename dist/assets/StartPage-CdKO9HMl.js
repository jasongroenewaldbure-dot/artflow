import{r as l,d as F,u as U,j as e,H as Y,a as h,L as H,s as p,z as u}from"./index-Tyz_JBt9.js";import{C as q}from"./circle-alert-Csbyw32W.js";import{C}from"./circle-check-big-D0cnAB6B.js";import{c as O}from"./createLucideIcon-DhCu6Z8O.js";import{M as $}from"./mail-D9DYH64a.js";import{A as _}from"./arrow-right-DYyn1uxC.js";import{L as G}from"./lock-BkYk8nJ6.js";import{E as J}from"./eye-off-D0IQTUpO.js";import{E as N}from"./eye-Ctq-Wxgo.js";import{S as V}from"./sparkles-nUh7ue08.js";/**
 * @license lucide-react v0.543.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]],Q=O("apple",K),de=()=>{const[s,y]=l.useState(""),[d,S]=l.useState(""),[o,a]=l.useState("email"),[b,n]=l.useState(""),[w,X]=l.useState(!1),[m,z]=l.useState(!1),[g,T]=l.useState(!1),[f,A]=l.useState(null),{signIn:I,signUp:M,signInWithMagicLink:x,user:j,loading:k}=F(),c=U();l.useEffect(()=>{!k&&j&&c("/u/dashboard",{replace:!0})},[j,k,c]),l.useEffect(()=>{(async()=>{const t=new URLSearchParams(window.location.hash.substring(1)),i=t.get("access_token"),L=t.get("refresh_token"),D=t.get("error");if(i&&L&&!D){console.log("StartPage: Magic link callback detected, redirecting to auth callback"),c("/auth/callback",{replace:!0});return}})()},[c]);const E=async r=>{if(r.preventDefault(),!!s){a("loading"),n("");try{if(console.log("StartPage: Starting email submission for:",s),console.log("StartPage: Sending magic link for email:",s),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){n("Please enter a valid email address."),a("email");return}await x(s.toLowerCase().trim()),console.log("StartPage: Magic link sent successfully"),a("magic-link-sent"),u.success("Check your email for a verification link!")}catch(t){console.error("StartPage: Error in handleEmailSubmit:",t),n(t.message||"Something went wrong"),a("email")}}},W=async r=>{if(r.preventDefault(),!!d){a("loading"),n("");try{const t=await I(s,d);if(t&&t.user){const{data:i}=await p.from("profiles").select("role").eq("id",t.user.id).single();c(i?"/u/dashboard":"/onboarding")}}catch(t){n(t.message||"Invalid password"),a("password")}}},v=async r=>{try{if(a("loading"),n(""),A(r),w){const{data:{user:t}}=await p.auth.getUser();if(t){const{error:i}=await p.from("profiles").update({role:r.toUpperCase()}).eq("id",t.id);if(i)throw i;c("/onboarding")}else sessionStorage.setItem("selectedRole",r),await x(s),a("magic-link-sent"),u.success("Magic link sent to your email!")}else sessionStorage.setItem("selectedRole",r),await x(s),a("magic-link-sent"),u.success("Magic link sent to your email!")}catch(t){n(t.message||"Failed to process role selection"),a("role-selection")}},R=async r=>{if(r.preventDefault(),!(!s||!d)){a("loading"),n("");try{await M(s,d),a("magic-link-sent")}catch(t){n(t.message||"Something went wrong"),a("password")}}},B=async r=>{try{n(""),a("loading");const t=f?`?role=${f}`:"",{error:i}=await p.auth.signInWithOAuth({provider:r,options:{redirectTo:`${window.location.origin}/auth/callback${t}`,queryParams:{access_type:"offline",prompt:"consent"}}});if(i)throw console.error("OAuth error:",i),i}catch(t){console.error(`OAuth error for ${r}:`,t),n(`OAuth authentication with ${r} is not configured. Please use email sign-in instead.`),a("email"),u.error(`OAuth with ${r} is not available. Please use email sign-in.`)}},P=[{id:"google",name:"Google",icon:()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),color:"#4285F4"},{id:"apple",name:"Apple",icon:Q,color:"#000000"}];return e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, var(--bg) 0%, var(--bg-alt) 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"var(--space-lg)",position:"relative",overflow:"hidden"},children:[e.jsxs(Y,{children:[e.jsx("title",{children:"Get Started | ArtFlow"}),e.jsx("meta",{name:"description",content:"Join ArtFlow to discover, buy, and sell art. Sign up or sign in to get started."})]}),e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundImage:"radial-gradient(circle at 25% 25%, rgba(110, 31, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(16, 185, 129, 0.1) 0%, transparent 50%)",pointerEvents:"none"}}),e.jsxs("div",{style:{width:"100%",maxWidth:"480px",position:"relative",zIndex:1},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"var(--space-2xl)"},children:[e.jsx(h,{to:"/",style:{fontSize:"36px",fontWeight:"800",color:"var(--primary)",textDecoration:"none",letterSpacing:"-0.5px",display:"inline-block",marginBottom:"var(--space-lg)"},children:"ArtFlow"}),e.jsxs("h1",{style:{fontSize:"28px",fontWeight:"700",margin:"0 0 var(--space-sm) 0",color:"var(--fg)",background:"linear-gradient(135deg, var(--fg) 0%, var(--primary) 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:[o==="email"&&"Welcome to ArtFlow",o==="password"&&"Welcome back",o==="role-selection"&&"Complete your profile",o==="magic-link-sent"&&"Check your email",o==="loading"&&"Please wait..."]}),e.jsxs("p",{style:{fontSize:"16px",color:"var(--muted)",margin:0,lineHeight:"1.5"},children:[o==="email"&&"Join the world's premier art marketplace",o==="password"&&"Enter your password to continue",o==="role-selection"&&"Tell us what you're here for to complete your profile",o==="magic-link-sent"&&"We sent you a verification email to get started",o==="loading"&&"Processing your request..."]})]}),e.jsxs("div",{style:{backgroundColor:"var(--card)",borderRadius:"var(--radius-xl)",padding:"var(--space-2xl)",boxShadow:"0 20px 40px rgba(0,0,0,0.1)",border:"1px solid var(--border)",backdropFilter:"blur(10px)"},children:[b&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",padding:"var(--space-md)",backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-lg)",color:"var(--danger)",fontSize:"14px"},children:[e.jsx(q,{size:16}),b]}),o==="magic-link-sent"&&e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-sm)",padding:"var(--space-md)",backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"var(--radius-md)",marginBottom:"var(--space-lg)",color:"var(--accent)",fontSize:"14px"},children:[e.jsx(C,{size:16}),"Magic link sent to ",s]}),o==="email"&&e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:"var(--space-xl)"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"var(--space-sm)",marginBottom:"var(--space-lg)"},children:P.map(r=>e.jsxs("button",{onClick:()=>B(r.id),style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",padding:"var(--space-md)",backgroundColor:"var(--bg)",border:"1px solid var(--border)",borderRadius:"var(--radius-md)",color:"var(--fg)",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",textDecoration:"none",position:"relative",zIndex:10,userSelect:"none",WebkitTapHighlightColor:"transparent"},onMouseEnter:t=>{t.currentTarget.style.backgroundColor="var(--bg-alt)",t.currentTarget.style.borderColor=r.color,t.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:t=>{t.currentTarget.style.backgroundColor="var(--bg)",t.currentTarget.style.borderColor="var(--border)",t.currentTarget.style.transform="translateY(0)"},children:[e.jsx(r.icon,{size:18,style:{color:r.color}}),r.name]},r.id))}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--space-md)",margin:"var(--space-lg) 0"},children:[e.jsx("div",{style:{flex:1,height:"1px",backgroundColor:"var(--border)"}}),e.jsx("span",{style:{fontSize:"14px",color:"var(--muted)",fontWeight:"500"},children:"OR"}),e.jsx("div",{style:{flex:1,height:"1px",backgroundColor:"var(--border)"}})]})]}),e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{style:{marginBottom:"var(--space-lg)"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"var(--fg)",marginBottom:"var(--space-sm)"},children:"Email address"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx($,{size:20,style:{position:"absolute",left:"var(--space-md)",top:"50%",transform:"translateY(-50%)",color:"var(--muted)"}}),e.jsx("input",{type:"email",value:s,onChange:r=>y(r.target.value),placeholder:"Enter your email",required:!0,style:{width:"100%",padding:"var(--space-md) var(--space-md) var(--space-md) var(--space-3xl)",border:"2px solid var(--border)",borderRadius:"var(--radius-md)",fontSize:"16px",backgroundColor:"var(--bg)",color:"var(--fg)",outline:"none",transition:"all 0.2s ease"},onFocus:r=>{r.currentTarget.style.borderColor="var(--primary)",r.currentTarget.style.boxShadow="0 0 0 3px rgba(110, 31, 255, 0.1)"},onBlur:r=>{r.currentTarget.style.borderColor="var(--border)",r.currentTarget.style.boxShadow="none"}})]})]}),e.jsxs("button",{type:"submit",style:{width:"100%",padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)",color:"white",border:"none",borderRadius:"var(--radius-md)",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-sm)",boxShadow:"0 4px 12px rgba(110, 31, 255, 0.3)",position:"relative",zIndex:10,userSelect:"none",WebkitTapHighlightColor:"transparent"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 8px 20px rgba(110, 31, 255, 0.4)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 4px 12px rgba(110, 31, 255, 0.3)"},children:["Continue with Email",e.jsx(_,{size:18})]})]})]}),o==="password"&&e.jsxs("form",{onSubmit:g?R:W,children:[e.jsxs("div",{style:{marginBottom:"var(--space-lg)"},children:[e.jsx("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"var(--fg)",marginBottom:"var(--space-sm)"},children:"Password"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(G,{size:20,style:{position:"absolute",left:"var(--space-md)",top:"50%",transform:"translateY(-50%)",color:"var(--muted)"}}),e.jsx("input",{type:m?"text":"password",value:d,onChange:r=>S(r.target.value),placeholder:"Enter your password",required:!0,style:{width:"100%",padding:"var(--space-md) var(--space-3xl) var(--space-md) var(--space-3xl)",border:"2px solid var(--border)",borderRadius:"var(--radius-md)",fontSize:"16px",backgroundColor:"var(--bg)",color:"var(--fg)",outline:"none",transition:"all 0.2s ease"},onFocus:r=>{r.currentTarget.style.borderColor="var(--primary)",r.currentTarget.style.boxShadow="0 0 0 3px rgba(110, 31, 255, 0.1)"},onBlur:r=>{r.currentTarget.style.borderColor="var(--border)",r.currentTarget.style.boxShadow="none"}}),e.jsx("button",{type:"button",onClick:()=>z(!m),style:{position:"absolute",right:"var(--space-md)",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",color:"var(--muted)",cursor:"pointer",padding:"var(--space-xs)",display:"flex",alignItems:"center",justifyContent:"center"},children:m?e.jsx(J,{size:18}):e.jsx(N,{size:18})})]})]}),e.jsxs("div",{style:{display:"flex",gap:"var(--space-sm)",marginBottom:"var(--space-lg)"},children:[e.jsx("button",{type:"submit",style:{flex:1,padding:"var(--space-md)",background:"linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%)",color:"white",border:"none",borderRadius:"var(--radius-md)",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(110, 31, 255, 0.3)"},onMouseEnter:r=>{r.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:r=>{r.currentTarget.style.transform="translateY(0)"},children:g?"Create Account":"Sign In"}),e.jsx("button",{type:"button",onClick:()=>T(!g),style:{flex:1,padding:"var(--space-md)",backgroundColor:"transparent",color:"var(--primary)",border:"2px solid var(--primary)",borderRadius:"var(--radius-md)",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="var(--primary)",r.currentTarget.style.color="white",r.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="var(--primary)",r.currentTarget.style.transform="translateY(0)"},children:g?"Sign In Instead":"Sign Up Instead"})]}),e.jsx("button",{type:"button",onClick:()=>a("email"),style:{width:"100%",padding:"var(--space-sm)",backgroundColor:"transparent",color:"var(--muted)",border:"none",fontSize:"14px",cursor:"pointer",textDecoration:"underline"},children:"Use a different email"})]}),o==="role-selection"&&e.jsxs("div",{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"var(--space-xl)"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"700",color:"var(--foreground)",margin:"0 0 var(--space-sm) 0"},children:"Complete your profile"}),e.jsx("p",{style:{fontSize:"16px",color:"var(--muted)",margin:0},children:"Choose your role to finish setting up your account"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--space-md)",marginBottom:"var(--space-xl)"},children:[e.jsx("button",{onClick:()=>v("artist"),style:{padding:"var(--space-lg)",border:"2px solid var(--border)",borderRadius:"var(--radius-lg)",backgroundColor:"var(--card)",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:r=>{r.currentTarget.style.borderColor="var(--primary)",r.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.05)"},onMouseLeave:r=>{r.currentTarget.style.borderColor="var(--border)",r.currentTarget.style.backgroundColor="var(--card)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"rgba(59, 130, 246, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"var(--space-sm)"},children:e.jsx("span",{style:{color:"var(--primary)",fontWeight:"bold",fontSize:"16px"},children:"A"})}),e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"var(--foreground)",margin:"0 0 var(--space-xs) 0"},children:"Artist"}),e.jsx("p",{style:{fontSize:"12px",color:"var(--muted)",margin:0},children:"Showcase your work and connect with collectors"})]})}),e.jsx("button",{onClick:()=>v("collector"),style:{padding:"var(--space-lg)",border:"2px solid var(--border)",borderRadius:"var(--radius-lg)",backgroundColor:"var(--card)",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:r=>{r.currentTarget.style.borderColor="var(--primary)",r.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.05)"},onMouseLeave:r=>{r.currentTarget.style.borderColor="var(--border)",r.currentTarget.style.backgroundColor="var(--card)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"var(--space-sm)"},children:e.jsx("span",{style:{color:"#ef4444",fontWeight:"bold",fontSize:"16px"},children:"C"})}),e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"var(--foreground)",margin:"0 0 var(--space-xs) 0"},children:"Collector"}),e.jsx("p",{style:{fontSize:"12px",color:"var(--muted)",margin:0},children:"Discover and collect amazing art"})]})}),e.jsx("button",{onClick:()=>v("both"),style:{padding:"var(--space-lg)",border:"2px solid var(--border)",borderRadius:"var(--radius-lg)",backgroundColor:"var(--card)",cursor:"pointer",transition:"all 0.2s ease",textAlign:"left"},onMouseEnter:r=>{r.currentTarget.style.borderColor="var(--primary)",r.currentTarget.style.backgroundColor="rgba(59, 130, 246, 0.05)"},onMouseLeave:r=>{r.currentTarget.style.borderColor="var(--border)",r.currentTarget.style.backgroundColor="var(--card)"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[e.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"rgba(147, 51, 234, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"var(--space-sm)"},children:e.jsx("span",{style:{color:"#9333ea",fontWeight:"bold",fontSize:"16px"},children:"B"})}),e.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"var(--foreground)",margin:"0 0 var(--space-xs) 0"},children:"Both"}),e.jsx("p",{style:{fontSize:"12px",color:"var(--muted)",margin:0},children:"Create art and collect from others"})]})})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("button",{onClick:()=>{a("email"),y(""),n("")},style:{color:"var(--primary)",fontSize:"14px",fontWeight:"500",background:"none",border:"none",cursor:"pointer",textDecoration:"none"},children:"Back to email"})})]}),o==="magic-link-sent"&&e.jsxs("div",{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"var(--space-xl)"},children:[e.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:"rgba(16, 185, 129, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto var(--space-lg) auto"},children:e.jsx(C,{size:40,style:{color:"var(--accent)"}})}),e.jsx("h3",{style:{fontSize:"20px",fontWeight:"600",margin:"0 0 var(--space-sm) 0",color:"var(--fg)"},children:"Check your email"}),e.jsxs("p",{style:{fontSize:"16px",color:"var(--muted)",margin:0},children:["We sent a verification link to ",e.jsx("strong",{children:s})]})]}),e.jsx("button",{onClick:()=>a("email"),style:{width:"100%",padding:"var(--space-md)",backgroundColor:"transparent",color:"var(--primary)",border:"2px solid var(--primary)",borderRadius:"var(--radius-md)",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="var(--primary)",r.currentTarget.style.color="white"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="transparent",r.currentTarget.style.color="var(--primary)"},children:"Use a different email"})]}),o==="loading"&&e.jsx("div",{style:{textAlign:"center",padding:"var(--space-xl) 0"},children:e.jsx(H,{size:"lg",color:"primary",text:"Processing your request..."})})]}),e.jsxs("div",{style:{textAlign:"center",marginTop:"var(--space-xl)",padding:"var(--space-lg)",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"var(--radius-lg)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("p",{style:{fontSize:"14px",color:"var(--muted)",margin:"0 0 var(--space-sm) 0"},children:["By continuing, you agree to our"," ",e.jsx(h,{to:"/terms",style:{color:"var(--primary)",textDecoration:"none"},children:"Terms of Service"})," ","and"," ",e.jsx(h,{to:"/privacy",style:{color:"var(--primary)",textDecoration:"none"},children:"Privacy Policy"})]}),e.jsxs("p",{style:{fontSize:"12px",color:"var(--muted)",margin:0,display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--space-xs)"},children:[e.jsx(V,{size:12}),"Secure authentication powered by Supabase"]})]})]})]})};export{de as default};
